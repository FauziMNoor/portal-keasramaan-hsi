# ðŸ“Š VISUAL DIAGRAM - KONFIRMASI & PERPANJANGAN

## ðŸŽ¯ SISTEM OVERVIEW

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SISTEM PERIZINAN KEPULANGAN                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WALI SANTRI                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  1. Isi Form Perizinan                                          â”‚
â”‚     â†“                                                            â”‚
â”‚  2. Submit Form                                                 â”‚
â”‚     â†“                                                            â”‚
â”‚  3. Status: "pending"                                           â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ KEPALA ASRAMA                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  1. Review Perizinan                                            â”‚
â”‚  2. Upload Bukti Formulir                                       â”‚
â”‚  3. Approve/Reject                                              â”‚
â”‚     â†“                                                            â”‚
â”‚  4. Status: "approved_kepas" atau "rejected"                    â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ KEPALA SEKOLAH                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  1. Review Perizinan                                            â”‚
â”‚  2. Final Approval                                              â”‚
â”‚     â†“                                                            â”‚
â”‚  3. Status: "approved_kepsek"                                   â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SANTRI PULANG                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  1. Santri Pulang (tanggal_mulai)                               â”‚
â”‚  2. Santri Kembali ke Asrama (tanggal_kembali)                  â”‚
â”‚     â†“                                                            â”‚
â”‚  3. Kepala Asrama Konfirmasi Kepulangan                         â”‚
â”‚     â†“                                                            â”‚
â”‚  4. Status: "sudah_pulang" atau "terlambat"                     â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ”„ WORKFLOW KONFIRMASI KEPULANGAN

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   KONFIRMASI KEPULANGAN SANTRI                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STEP 1: Santri Pulang
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tanggal Mulai: 2025-01-01                                        â”‚
â”‚ Tanggal Selesai: 2025-01-05                                      â”‚
â”‚ Status: "approved_kepsek"                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
STEP 2: Santri Kembali
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Santri kembali ke asrama pada tanggal tertentu                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
STEP 3: Kepala Asrama Konfirmasi
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ URL: /perizinan/kepulangan/konfirmasi-kepulangan                 â”‚
â”‚                                                                  â”‚
â”‚ 1. Buka halaman konfirmasi                                       â”‚
â”‚ 2. Pilih santri dari list                                        â”‚
â”‚ 3. Klik "Konfirmasi"                                             â”‚
â”‚ 4. Input tanggal kembali                                         â”‚
â”‚ 5. Input catatan (optional)                                      â”‚
â”‚ 6. Klik "Simpan Konfirmasi"                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
STEP 4: Sistem Auto-Detect
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ IF tanggal_kembali > tanggal_selesai THEN                        â”‚
â”‚   status_kepulangan = "terlambat"                                â”‚
â”‚   Hitung: Terlambat X hari                                       â”‚
â”‚ ELSE                                                             â”‚
â”‚   status_kepulangan = "sudah_pulang"                             â”‚
â”‚ END IF                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
STEP 5: Status Terupdate
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Database Updated:                                                â”‚
â”‚ â”œâ”€ status_kepulangan: "sudah_pulang" atau "terlambat"           â”‚
â”‚ â”œâ”€ tanggal_kembali: 2025-01-05 (atau lebih)                     â”‚
â”‚ â”œâ”€ dikonfirmasi_oleh: "Nama Kepala Asrama"                      â”‚
â”‚ â”œâ”€ dikonfirmasi_at: 2025-01-05 10:30:00                         â”‚
â”‚ â””â”€ catatan_kembali: "Santri dalam kondisi sehat"                â”‚
â”‚                                                                  â”‚
â”‚ Rekap Perizinan Updated:                                        â”‚
â”‚ â””â”€ Kolom "Status Kepulangan" menampilkan status baru             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ”„ WORKFLOW PERPANJANGAN IZIN

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              PERPANJANGAN IZIN DENGAN DOKUMEN                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STEP 1: Wali Santri Akses Form
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ URL: /perizinan/kepulangan/perpanjangan/[token]                  â”‚
â”‚                                                                  â”‚
â”‚ 1. Wali santri klik link perpanjangan                            â”‚
â”‚ 2. Sistem validasi token                                         â”‚
â”‚ 3. Halaman form perpanjangan terbuka                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
STEP 2: Pilih Perizinan (Step 1)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ List Perizinan yang Bisa Diperpanjang:                           â”‚
â”‚                                                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Nama: Andi Wijaya                                           â”‚ â”‚
â”‚ â”‚ NIS: 2024001                                                â”‚ â”‚
â”‚ â”‚ Kelas: X-A                                                  â”‚ â”‚
â”‚ â”‚ Tanggal: 2025-01-01 - 2025-01-05 (5 hari)                  â”‚ â”‚
â”‚ â”‚ Kategori: Keperluan Keluarga                                â”‚ â”‚
â”‚ â”‚                                                             â”‚ â”‚
â”‚ â”‚ [PILIH]                                                     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚ Filter: Hanya perizinan yang:                                   â”‚
â”‚ â”œâ”€ Status = "approved_kepsek"                                   â”‚
â”‚ â”œâ”€ is_perpanjangan = false                                      â”‚
â”‚ â””â”€ Belum selesai atau baru selesai (max 3 hari)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
STEP 3: Isi Form Perpanjangan (Step 2)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Perizinan Awal:                                                  â”‚
â”‚ â”œâ”€ Nama: Andi Wijaya                                             â”‚
â”‚ â”œâ”€ NIS: 2024001                                                  â”‚
â”‚ â”œâ”€ Tanggal Selesai: 2025-01-05                                   â”‚
â”‚ â””â”€ Durasi: 5 hari                                                â”‚
â”‚                                                                  â”‚
â”‚ Form Perpanjangan:                                               â”‚
â”‚ â”œâ”€ Tanggal Selesai Baru: [2025-01-08]                            â”‚
â”‚ â”‚  â””â”€ Perpanjangan: +3 hari                                      â”‚
â”‚ â”‚  â””â”€ Total Durasi: 8 hari                                       â”‚
â”‚ â”‚                                                                â”‚
â”‚ â”œâ”€ Alasan Perpanjangan: [Masih dalam perawatan medis]            â”‚
â”‚ â”‚                                                                â”‚
â”‚ â”œâ”€ Tipe Dokumen: [Surat Keterangan Dokter â–¼]                     â”‚
â”‚ â”‚  â”œâ”€ Surat Keterangan Dokter                                    â”‚
â”‚ â”‚  â”œâ”€ Surat dari Keluarga                                        â”‚
â”‚ â”‚  â””â”€ Surat Lainnya                                              â”‚
â”‚ â”‚                                                                â”‚
â”‚ â””â”€ Upload Dokumen: [Klik untuk upload]                           â”‚
â”‚    â””â”€ File: surat_dokter.pdf (2.5 MB)                            â”‚
â”‚    â””â”€ Preview: [Tampil preview jika image]                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
STEP 4: Validasi Perpanjangan
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Validasi Checklist:                                              â”‚
â”‚                                                                  â”‚
â”‚ âœ“ Tanggal baru (2025-01-08) > tanggal lama (2025-01-05)         â”‚
â”‚ âœ“ Total durasi (8 hari) â‰¤ 30 hari                               â”‚
â”‚ âœ“ Perpanjangan (1x) â‰¤ 3x                                        â”‚
â”‚ âœ“ Dokumen sudah diupload                                        â”‚
â”‚ âœ“ File size (2.5 MB) â‰¤ 5 MB                                     â”‚
â”‚ âœ“ File type (PDF) = JPG/PNG/PDF                                 â”‚
â”‚                                                                  â”‚
â”‚ Status: âœ… VALID - Bisa submit                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
STEP 5: Submit Perpanjangan
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Upload dokumen ke storage bucket                              â”‚
â”‚    â””â”€ Bucket: dokumen-perpanjangan                               â”‚
â”‚    â””â”€ File: perpanjangan-2024001-1234567890.pdf                  â”‚
â”‚    â””â”€ URL: https://storage.../dokumen-perpanjangan/...           â”‚
â”‚                                                                  â”‚
â”‚ 2. Buat record perpanjangan baru                                 â”‚
â”‚    â”œâ”€ is_perpanjangan: true                                      â”‚
â”‚    â”œâ”€ perizinan_induk_id: [ID perizinan awal]                    â”‚
â”‚    â”œâ”€ perpanjangan_ke: 1                                         â”‚
â”‚    â”œâ”€ tanggal_selesai: 2025-01-08                                â”‚
â”‚    â”œâ”€ durasi_hari: 8                                             â”‚
â”‚    â”œâ”€ alasan_perpanjangan: "Masih dalam perawatan medis"         â”‚
â”‚    â”œâ”€ dokumen_pendukung_url: [URL dokumen]                       â”‚
â”‚    â”œâ”€ dokumen_pendukung_tipe: "surat_dokter"                     â”‚
â”‚    â””â”€ status: "pending"                                          â”‚
â”‚                                                                  â”‚
â”‚ 3. Insert ke tabel dokumen_perpanjangan_keasramaan               â”‚
â”‚    â”œâ”€ perizinan_id: [ID perpanjangan baru]                       â”‚
â”‚    â”œâ”€ nama_dokumen: "surat_dokter.pdf"                           â”‚
â”‚    â”œâ”€ tipe_dokumen: "surat_dokter"                               â”‚
â”‚    â”œâ”€ file_url: [URL dokumen]                                    â”‚
â”‚    â”œâ”€ file_size: 2621440 (bytes)                                 â”‚
â”‚    â”œâ”€ file_type: "application/pdf"                               â”‚
â”‚    â””â”€ uploaded_by: "Nama Wali Santri"                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
STEP 6: Success Page (Step 3)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                  â”‚
â”‚                    âœ… PERPANJANGAN BERHASIL!                     â”‚
â”‚                                                                  â”‚
â”‚ Detail Perpanjangan:                                             â”‚
â”‚ â”œâ”€ Nama: Andi Wijaya                                             â”‚
â”‚ â”œâ”€ NIS: 2024001                                                  â”‚
â”‚ â”œâ”€ Tanggal Selesai Awal: 2025-01-05                              â”‚
â”‚ â”œâ”€ Tanggal Selesai Baru: 2025-01-08                              â”‚
â”‚ â”œâ”€ Perpanjangan: +3 hari                                         â”‚
â”‚ â”œâ”€ Total Durasi: 8 hari                                          â”‚
â”‚ â””â”€ Status: â³ Menunggu Persetujuan                               â”‚
â”‚                                                                  â”‚
â”‚ Catatan: Perpanjangan akan diproses oleh Kepala Asrama           â”‚
â”‚ dan Kepala Sekolah. Anda akan diberitahu via WhatsApp.           â”‚
â”‚                                                                  â”‚
â”‚ [KEMBALI KE BERANDA]                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
STEP 7: Approval Perpanjangan
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Kepala Asrama:                                                   â”‚
â”‚ â”œâ”€ Buka: /perizinan/kepulangan/approval                          â”‚
â”‚ â”œâ”€ Filter: "Perpanjangan Izin"                                   â”‚
â”‚ â”œâ”€ Lihat dokumen perpanjangan                                    â”‚
â”‚ â”œâ”€ Approve/Reject                                                â”‚
â”‚ â””â”€ Status: "approved_kepas" atau "rejected"                      â”‚
â”‚                                                                  â”‚
â”‚ Kepala Sekolah:                                                  â”‚
â”‚ â”œâ”€ Buka: /perizinan/kepulangan/approval                          â”‚
â”‚ â”œâ”€ Filter: "Menunggu Kepsek"                                     â”‚
â”‚ â”œâ”€ Review perpanjangan                                           â”‚
â”‚ â”œâ”€ Final Approval                                                â”‚
â”‚ â””â”€ Status: "approved_kepsek"                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
STEP 8: Perpanjangan Disetujui
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Status: âœ… "approved_kepsek"                                     â”‚
â”‚                                                                  â”‚
â”‚ Santri bisa pulang lebih lama:                                   â”‚
â”‚ â”œâ”€ Tanggal Selesai Awal: 2025-01-05                              â”‚
â”‚ â”œâ”€ Tanggal Selesai Baru: 2025-01-08                              â”‚
â”‚ â””â”€ Durasi Tambahan: 3 hari                                       â”‚
â”‚                                                                  â”‚
â”‚ Rekap Perizinan Updated:                                        â”‚
â”‚ â””â”€ Tampil perpanjangan dengan status "Disetujui"                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ“Š DATABASE RELATIONSHIP

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         perizinan_kepulangan_keasramaan (Perizinan Awal)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)                                                         â”‚
â”‚ nis, nama_siswa, kelas, asrama, cabang                          â”‚
â”‚ tanggal_mulai, tanggal_selesai, durasi_hari                     â”‚
â”‚ keperluan, alasan, alamat_tujuan, no_hp_wali                    â”‚
â”‚ status (pending, approved_kepas, approved_kepsek, rejected)     â”‚
â”‚ approved_by_kepas, approved_at_kepas, catatan_kepas             â”‚
â”‚ approved_by_kepsek, approved_at_kepsek, catatan_kepsek          â”‚
â”‚ bukti_formulir_url, bukti_formulir_uploaded_at                  â”‚
â”‚                                                                  â”‚
â”‚ âœ¨ BARU - Konfirmasi Kepulangan:                                â”‚
â”‚ status_kepulangan (belum_pulang, sudah_pulang, terlambat)       â”‚
â”‚ tanggal_kembali, dikonfirmasi_oleh, dikonfirmasi_at             â”‚
â”‚ catatan_kembali                                                 â”‚
â”‚                                                                  â”‚
â”‚ âœ¨ BARU - Perpanjangan Izin:                                    â”‚
â”‚ is_perpanjangan (true/false)                                    â”‚
â”‚ perizinan_induk_id (FK) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚ alasan_perpanjangan                       â”‚                     â”‚
â”‚ jumlah_perpanjangan_hari                  â”‚                     â”‚
â”‚ perpanjangan_ke (1, 2, 3)                 â”‚                     â”‚
â”‚ dokumen_pendukung_url                     â”‚                     â”‚
â”‚ dokumen_pendukung_uploaded_at             â”‚                     â”‚
â”‚ dokumen_pendukung_tipe                    â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â”‚ 1:N
                                            â”‚
                                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         perizinan_kepulangan_keasramaan (Perpanjangan)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)                                                         â”‚
â”‚ perizinan_induk_id (FK) â† Referensi ke perizinan awal           â”‚
â”‚ is_perpanjangan = true                                          â”‚
â”‚ perpanjangan_ke = 1, 2, atau 3                                  â”‚
â”‚ tanggal_selesai (tanggal baru)                                  â”‚
â”‚ durasi_hari (durasi total)                                      â”‚
â”‚ alasan_perpanjangan                                             â”‚
â”‚ dokumen_pendukung_url                                           â”‚
â”‚ dokumen_pendukung_tipe                                          â”‚
â”‚ status (pending, approved_kepas, approved_kepsek, rejected)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â”‚ 1:N
                                            â”‚
                                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         dokumen_perpanjangan_keasramaan (Dokumen)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)                                                         â”‚
â”‚ perizinan_id (FK) â† Referensi ke perpanjangan                   â”‚
â”‚ nama_dokumen                                                    â”‚
â”‚ tipe_dokumen (surat_dokter, surat_keluarga, surat_lainnya)      â”‚
â”‚ deskripsi                                                       â”‚
â”‚ file_url (di storage bucket: dokumen-perpanjangan)              â”‚
â”‚ file_size, file_type                                            â”‚
â”‚ uploaded_by, uploaded_at                                        â”‚
â”‚ created_at, updated_at                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸŽ¯ FITUR MATRIX

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FITUR MATRIX                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚ KONFIRMASI KEPULANGAN                                            â”‚
â”‚ â”œâ”€ Halaman: /perizinan/kepulangan/konfirmasi-kepulangan         â”‚
â”‚ â”œâ”€ Akses: Kepala Asrama, Admin, Kepala Sekolah                  â”‚
â”‚ â”œâ”€ Fitur:                                                        â”‚
â”‚ â”‚  â”œâ”€ List santri yang sedang pulang                            â”‚
â”‚ â”‚  â”œâ”€ Filter: Belum Pulang, Sudah Pulang, Terlambat             â”‚
â”‚ â”‚  â”œâ”€ Stats: Total, Belum Pulang, Sudah Pulang, Terlambat       â”‚
â”‚ â”‚  â”œâ”€ Input tanggal kembali                                     â”‚
â”‚ â”‚  â”œâ”€ Auto-detect terlambat                                     â”‚
â”‚ â”‚  â”œâ”€ Simpan konfirmasi                                         â”‚
â”‚ â”‚  â””â”€ Edit konfirmasi                                           â”‚
â”‚ â””â”€ Database: 5 kolom baru + 1 function + 1 trigger              â”‚
â”‚                                                                  â”‚
â”‚ PERPANJANGAN IZIN                                                â”‚
â”‚ â”œâ”€ Halaman: /perizinan/kepulangan/perpanjangan/[token]          â”‚
â”‚ â”œâ”€ Akses: Wali Santri (via token link)                          â”‚
â”‚ â”œâ”€ Fitur:                                                        â”‚
â”‚ â”‚  â”œâ”€ Step 1: Pilih perizinan                                   â”‚
â”‚ â”‚  â”œâ”€ Step 2: Isi form + upload dokumen                         â”‚
â”‚ â”‚  â”œâ”€ Step 3: Success page                                      â”‚
â”‚ â”‚  â”œâ”€ Auto-hitung perpanjangan hari                             â”‚
â”‚ â”‚  â”œâ”€ Auto-hitung total durasi                                  â”‚
â”‚ â”‚  â”œâ”€ Validasi perpanjangan (max 3x, max 30 hari)               â”‚
â”‚ â”‚  â”œâ”€ Upload dokumen (JPG, PNG, PDF)                            â”‚
â”‚ â”‚  â”œâ”€ Preview dokumen                                           â”‚
â”‚ â”‚  â””â”€ Tipe dokumen (surat dokter, surat keluarga, dll)           â”‚
â”‚ â”œâ”€ Database: 8 kolom baru + 1 tabel + 1 function + 1 trigger    â”‚
â”‚ â”œâ”€ Storage: 1 bucket baru (dokumen-perpanjangan)                â”‚
â”‚ â””â”€ API: 1 endpoint baru (upload-dokumen-perpanjangan)           â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ” SECURITY & VALIDATION

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  SECURITY & VALIDATION                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚ KONFIRMASI KEPULANGAN:                                           â”‚
â”‚ â”œâ”€ Role Check: Hanya Kepala Asrama, Admin, Kepala Sekolah       â”‚
â”‚ â”œâ”€ Cabang Check: Kepala Asrama hanya lihat cabang sendiri        â”‚
â”‚ â”œâ”€ Status Check: Hanya perizinan dengan status "approved_kepsek" â”‚
â”‚ â””â”€ Date Validation: Tanggal kembali harus valid                  â”‚
â”‚                                                                  â”‚
â”‚ PERPANJANGAN IZIN:                                               â”‚
â”‚ â”œâ”€ Token Validation: Token harus valid & aktif                   â”‚
â”‚ â”œâ”€ Perizinan Check: Hanya perizinan yang bisa diperpanjang       â”‚
â”‚ â”œâ”€ Date Validation: Tanggal baru > tanggal lama                  â”‚
â”‚ â”œâ”€ Duration Validation: Total durasi â‰¤ 30 hari                  â”‚
â”‚ â”œâ”€ Count Validation: Perpanjangan â‰¤ 3x                          â”‚
â”‚ â”œâ”€ File Validation:                                              â”‚
â”‚ â”‚  â”œâ”€ Size: â‰¤ 5 MB                                               â”‚
â”‚ â”‚  â”œâ”€ Type: JPG, PNG, PDF                                        â”‚
â”‚ â”‚  â””â”€ Required: Dokumen harus diupload                           â”‚
â”‚ â”œâ”€ RLS Policy: Hanya user yang authorized                        â”‚
â”‚ â””â”€ Storage Security: Bucket public tapi file terenkripsi         â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Version**: 1.0.0  
**Date**: November 2025  
**Status**: READY âœ…
